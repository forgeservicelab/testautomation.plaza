*** Settings ***
Documentation   Join forge with different roles
Suite Setup    Go to frontpage
#Suite Teardown    Close All Browsers
Resource    ../common/assets/secrets.txt
Resource    ../common/assets/resource.txt
Resource    ../local_resource.txt


*** Variables ***
${USER_NAME}    tperson
${USER_EMAIL}   test@testemailaddress.com

*** Test Cases ***
I want to develop a world-class digital service
    [Tags]    noncritical
    Go to    ${DRUPAL_URL}
    Wait Until Page Contains    Join Forge
    Click Link  Join Forge
    Wait Until Page Contains    Join FORGE Service Lab!
    Sleep   9 s
    Click Element   id=edit-submitted-role-1
#    Click Element   jquery=input.button-primary
    Click Link    Continue >
    Wait Until Page Contains    I want to develop a world-class digital service
    Sleep   9 s
#    Click Element   jquery=input.button-primary
    Click Link    Fill in the application
    Wait Until Page Contains    Username
    Input Text  id=edit-name    ${USER_NAME}
    Input Text  id=edit-mail    ${USER_EMAIL}
    Sleep   9 s
    Click Element   id=edit-submit
    Wait Until Page Contains    The name ${USER_NAME} is already taken
Mandatory fields
    Input Text  id=edit-name    ${EMPTY}
    Input Text  id=edit-mail    ${EMPTY}
    Sleep   9 s
    Click Element   id=edit-submit
    Page Should Contain    Username field is required.
    Page Should Contain    E-mail address field is required.
    
