*** Settings ***
Documentation    Check that user is able to add bulletin board item, comment it and delete it
Suite Setup    Login as partner with cra
Suite Teardown    Close All Browsers
Resource    ../common/assets/secrets.txt
Resource    ../common/assets/resource.txt
Resource    ../common/functions.txt
Resource    ../local_resource.txt


*** Variables ***
${USER}    ${VALID_PARTNER}
${PASSWORD}    ${VALID_PARTNER_PASSWORD}

*** Test Cases ***
#Go to plaza
#    Go to    ${DRUPAL_URL}
#    Click Link     Log in
Open bulletin board
    Go to    ${DRUPAL_URL}/en/bulletin-board
    Page Should Contain    Bulletin board
Has access to create new item
    Wait Until Page Contains    Add content
    Mouse Over  link=Add content
    Click Link    Bulletin board item
    Page Should Contain    Create Bulletin board item
Check mandatory fields
    Click Element    id=edit-submit
    Page Should Contain    Title field is required.
    Page Should Contain    Summary field is required.
Check maxlength title
    [Tags]    noncritical
    Verify maxlength    edit-field-page-title-und-0-value    255
Add BB item
    Input Text    id=edit-field-page-title-und-0-value    TA bb item servicedeveloper
    Input Text    id=edit-field-bulletin-summary-und-0-value    TA bb summary
    Click Element    id=edit-submit
    Page Should Contain    Bulletin board item TA bb item servicedeveloper has been created.
Edit BB item
    Click Link    Edit
    Page Should Contain    Title
    Page Should Contain    Write here a short summary
    Click Element   id=edit-submit
Add new Reply mandatory field
    Click Element    id=edit-submit
    Page Should Contain    Reply field is required.
Add new Reply
    Execute Javascript   CKEDITOR.instances['edit-comment-body-und-0-value'].setData('TA bb comment');
#   Input Text    id=edit-comment-body-und-0-value    TA bb comment
    Click Element    id=edit-submit
    Page Should Contain    TA bb comment
Delete BB item
    Click Link    Edit
    Page Should Contain    Write here a short summary of what your bulletin board item is about.
    Click Element    id=edit-delete
    Page Should Contain    This action cannot be undone.
    Click Element    id=edit-submit
    Page Should Contain    has been deleted
